<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeCapsule</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/sidebar.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/account.css}">
    <link rel="stylesheet" th:href="@{/css/modal.css}">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div th:replace="~{fragments/sidebar :: sidebar}"></div>
<main class="account-management-main">
    <section class="account-management-container">
        <h1 class="account-management-title">계정 관리</h1>
        <form id="updateUserForm" class="password-reset-form">
            <input type="hidden" id="provider" name="provider" th:value="${user.provider}"/>
            <input type="hidden" id="id" name="id" th:value="${user.userId}"/>
            <div class="form-group" th:if="${user.provider == null}">
                <div class="input-wrapper icon-user">
                    <label><input type="text" id="displayId" name="displayId" th:value="${user.userId}" placeholder="아이디" readonly></label>
                </div>
            </div>
            <div class="form-group" th:if="${user.provider == null}">
                <div class="input-wrapper icon-password">
                    <label><input type="password" id="password" name="password" placeholder="기존 비밀번호" readonly></label>
                </div>
            </div>
            <div class="form-group" th:if="${user.provider == null}">
                <div class="input-wrapper icon-password">
                    <label><input type="password" id="newPassword" name="newPassword" placeholder="신규 비밀번호" readonly></label>
                </div>
            </div>
            <div class="form-group">
                <div class="input-wrapper icon-email">
                    <label><input type="email" id="email" name="email" th:value="${user.email}" placeholder="이메일" readonly></label>
                    <span id="emailResult"></span>
                </div>
            </div>
            <div class="form-group">
                <div class="input-wrapper icon-nickname">
                    <label><input type="text" id="nickname" name="nickname" th:value="${user.nickname}" placeholder="닉네임" readonly></label>
                    <span id="nicknameResult"></span>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="account-management-btn btn-update-user">수정</button>
            </div>
        </form>
        <div class="delete-account-actions">
            <button type="button" id="openModal" class="delete-account-btn btn-delete-user">회원 탈퇴</button>
        </div>
    </section>
    <div th:replace="~{fragments/modal :: allModals}"></div>
</main>
<div th:replace="~{fragments/footer :: footer}"></div>
<script type="text/javascript" th:src="@{/js/auth.js}"></script>
<script type="text/javascript" th:src="@{/js/header.js}"></script>
<script type="text/javascript" th:src="@{/js/modalUtils.js}"></script>
<script type="text/javascript" th:src="@{/js/accountManagement.js}"></script>
</body>
</html>

